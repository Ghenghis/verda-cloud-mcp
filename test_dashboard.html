<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verda Training Dashboard - Enterprise Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --border-color: #30363d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-yellow: #d29922;
            --accent-red: #f85149;
            --accent-purple: #a371f7;
        }
        * { font-family: 'Inter', sans-serif; }
        body { background: var(--bg-primary); color: var(--text-primary); }
        .glass {
            background: rgba(22, 27, 34, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
        }
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        .card:hover { border-color: var(--accent-blue); transform: translateY(-2px); }
        .metric-value { font-size: 2.5rem; font-weight: 700; }
        .metric-label { color: var(--text-secondary); font-size: 0.875rem; text-transform: uppercase; }
        .progress-bar { background: var(--bg-tertiary); border-radius: 9999px; overflow: hidden; }
        .progress-fill { background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple)); transition: width 0.5s ease; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; animation: pulse 2s infinite; }
        .status-dot.online { background: var(--accent-green); }
        .status-dot.warning { background: var(--accent-yellow); }
        .status-dot.error { background: var(--accent-red); }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .btn { padding: 8px 16px; border-radius: 8px; font-weight: 500; transition: all 0.2s; cursor: pointer; }
        .btn-primary { background: var(--accent-blue); color: white; }
        .btn-primary:hover { background: #4c9aed; }
        .btn-danger { background: var(--accent-red); color: white; }
        .btn-success { background: var(--accent-green); color: white; }
        .sidebar { width: 260px; background: var(--bg-secondary); border-right: 1px solid var(--border-color); }
        .nav-item { padding: 12px 20px; border-radius: 8px; margin: 4px 12px; cursor: pointer; transition: all 0.2s; }
        .nav-item:hover { background: var(--bg-tertiary); }
        .nav-item.active { background: var(--accent-blue); color: white; }
        .log-entry { font-family: 'Monaco', monospace; font-size: 12px; padding: 4px 8px; border-radius: 4px; }
        .log-info { background: rgba(88, 166, 255, 0.1); border-left: 3px solid var(--accent-blue); }
        .log-success { background: rgba(63, 185, 80, 0.1); border-left: 3px solid var(--accent-green); }
        .log-warning { background: rgba(210, 153, 34, 0.1); border-left: 3px solid var(--accent-yellow); }
        .log-error { background: rgba(248, 81, 73, 0.1); border-left: 3px solid var(--accent-red); }
        .tooltip { position: relative; }
        .tooltip::after { content: attr(data-tip); position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); background: var(--bg-tertiary); padding: 4px 8px; border-radius: 4px; font-size: 12px; white-space: nowrap; opacity: 0; pointer-events: none; transition: opacity 0.2s; }
        .tooltip:hover::after { opacity: 1; }
        .gpu-bar { height: 24px; border-radius: 6px; overflow: hidden; background: var(--bg-tertiary); }
        .gpu-fill { height: 100%; transition: width 0.3s ease; }
        .gpu-fill.high { background: linear-gradient(90deg, var(--accent-green), #2ea043); }
        .gpu-fill.medium { background: linear-gradient(90deg, var(--accent-yellow), #d4a72c); }
        .gpu-fill.low { background: linear-gradient(90deg, var(--accent-red), #da3633); }
        .notification { padding: 12px 16px; border-radius: 8px; margin-bottom: 8px; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .tab { padding: 8px 16px; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab.active { border-color: var(--accent-blue); color: var(--accent-blue); }
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .modal-content { background: var(--bg-secondary); border-radius: 16px; padding: 24px; max-width: 600px; width: 90%; }
        .sparkline { height: 40px; display: flex; align-items: flex-end; gap: 2px; }
        .sparkline-bar { width: 4px; background: var(--accent-blue); border-radius: 2px; transition: height 0.3s; }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header -->
    <header class="glass sticky top-0 z-50 px-6 py-4 flex items-center justify-between">
        <div class="flex items-center gap-4">
            <div class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
                üöÄ Verda Dashboard
            </div>
            <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium">
                Enterprise v2.4.0
            </span>
        </div>
        <div class="flex items-center gap-4">
            <div class="flex items-center gap-2 px-4 py-2 glass rounded-lg">
                <div class="status-dot online"></div>
                <span class="text-sm">4x B300 SPOT</span>
            </div>
            <button class="btn btn-primary" onclick="refreshData()">‚Üª Refresh</button>
            <button class="btn" style="background: var(--bg-tertiary);" onclick="toggleSettings()">‚öôÔ∏è</button>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside class="sidebar min-h-screen sticky top-16">
            <div class="py-4">
                <div class="nav-item active" onclick="showSection('overview')">
                    <span class="mr-3">üìä</span> Overview
                </div>
                <div class="nav-item" onclick="showSection('training')">
                    <span class="mr-3">üéØ</span> Training
                </div>
                <div class="nav-item" onclick="showSection('gpus')">
                    <span class="mr-3">üñ•Ô∏è</span> GPUs
                </div>
                <div class="nav-item" onclick="showSection('costs')">
                    <span class="mr-3">üí∞</span> Costs
                </div>
                <div class="nav-item" onclick="showSection('models')">
                    <span class="mr-3">üì¶</span> Models
                </div>
                <div class="nav-item" onclick="showSection('datasets')">
                    <span class="mr-3">üìä</span> Datasets
                </div>
                <div class="nav-item" onclick="showSection('logs')">
                    <span class="mr-3">üìù</span> Logs
                </div>
                <div class="nav-item" onclick="showSection('alerts')">
                    <span class="mr-3">üîî</span> Alerts
                </div>
            </div>
            <div class="absolute bottom-4 left-4 right-4">
                <div class="card p-4">
                    <div class="text-sm text-gray-400 mb-2">Session Cost</div>
                    <div class="text-2xl font-bold text-green-400">$12.45</div>
                    <div class="text-xs text-gray-500 mt-1">Saved $37.35 with SPOT</div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6">
            <!-- Metrics Grid -->
            <div class="grid grid-cols-4 gap-4 mb-6">
                <div class="card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="metric-label">GPU Utilization</div>
                        <div class="status-dot online"></div>
                    </div>
                    <div class="metric-value text-green-400" id="gpuUtil">94%</div>
                    <div class="sparkline mt-4" id="gpuSparkline"></div>
                </div>
                <div class="card p-6">
                    <div class="metric-label mb-4">Training Loss</div>
                    <div class="metric-value text-blue-400" id="loss">0.234</div>
                    <div class="text-sm text-gray-400 mt-2">‚Üì 12% from start</div>
                </div>
                <div class="card p-6">
                    <div class="metric-label mb-4">Progress</div>
                    <div class="metric-value text-purple-400" id="progress">67%</div>
                    <div class="progress-bar h-2 mt-4">
                        <div class="progress-fill h-full" style="width: 67%"></div>
                    </div>
                </div>
                <div class="card p-6">
                    <div class="metric-label mb-4">ETA</div>
                    <div class="metric-value text-yellow-400" id="eta">2h 15m</div>
                    <div class="text-sm text-gray-400 mt-2">Epoch 2/3</div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold">Training Loss</h3>
                        <div class="flex gap-2">
                            <button class="tab active">1H</button>
                            <button class="tab">6H</button>
                            <button class="tab">24H</button>
                        </div>
                    </div>
                    <canvas id="lossChart" height="200"></canvas>
                </div>
                <div class="card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold">GPU Memory</h3>
                        <span class="text-sm text-gray-400">Per GPU</span>
                    </div>
                    <canvas id="memoryChart" height="200"></canvas>
                </div>
            </div>

            <!-- GPU Status -->
            <div class="card p-6 mb-6">
                <h3 class="font-semibold mb-4">GPU Status</h3>
                <div class="grid grid-cols-4 gap-4" id="gpuGrid">
                    <div class="p-4 rounded-lg" style="background: var(--bg-tertiary);">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">GPU 0</span>
                            <span class="text-green-400">94%</span>
                        </div>
                        <div class="gpu-bar"><div class="gpu-fill high" style="width: 94%"></div></div>
                        <div class="flex justify-between mt-2 text-xs text-gray-400">
                            <span>245GB / 262GB</span>
                            <span>72¬∞C</span>
                        </div>
                    </div>
                    <div class="p-4 rounded-lg" style="background: var(--bg-tertiary);">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">GPU 1</span>
                            <span class="text-green-400">92%</span>
                        </div>
                        <div class="gpu-bar"><div class="gpu-fill high" style="width: 92%"></div></div>
                        <div class="flex justify-between mt-2 text-xs text-gray-400">
                            <span>241GB / 262GB</span>
                            <span>70¬∞C</span>
                        </div>
                    </div>
                    <div class="p-4 rounded-lg" style="background: var(--bg-tertiary);">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">GPU 2</span>
                            <span class="text-green-400">95%</span>
                        </div>
                        <div class="gpu-bar"><div class="gpu-fill high" style="width: 95%"></div></div>
                        <div class="flex justify-between mt-2 text-xs text-gray-400">
                            <span>248GB / 262GB</span>
                            <span>73¬∞C</span>
                        </div>
                    </div>
                    <div class="p-4 rounded-lg" style="background: var(--bg-tertiary);">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">GPU 3</span>
                            <span class="text-green-400">93%</span>
                        </div>
                        <div class="gpu-bar"><div class="gpu-fill high" style="width: 93%"></div></div>
                        <div class="flex justify-between mt-2 text-xs text-gray-400">
                            <span>243GB / 262GB</span>
                            <span>71¬∞C</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Training Controls & Logs -->
            <div class="grid grid-cols-3 gap-4">
                <div class="card p-6">
                    <h3 class="font-semibold mb-4">Controls</h3>
                    <div class="space-y-3">
                        <button class="btn btn-danger w-full" onclick="stopTraining()">‚èπÔ∏è Stop Training</button>
                        <button class="btn btn-primary w-full" onclick="saveCheckpoint()">üíæ Save Checkpoint</button>
                        <button class="btn w-full" style="background: var(--bg-tertiary);" onclick="downloadLogs()">üì• Download Logs</button>
                    </div>
                    <div class="mt-6">
                        <h4 class="text-sm text-gray-400 mb-2">Quick Actions</h4>
                        <div class="flex flex-wrap gap-2">
                            <button class="px-3 py-1 rounded text-sm" style="background: var(--bg-tertiary);">nvidia-smi</button>
                            <button class="px-3 py-1 rounded text-sm" style="background: var(--bg-tertiary);">tail logs</button>
                            <button class="px-3 py-1 rounded text-sm" style="background: var(--bg-tertiary);">disk usage</button>
                        </div>
                    </div>
                </div>
                <div class="card p-6 col-span-2">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold">Live Logs</h3>
                        <div class="flex gap-2">
                            <button class="px-2 py-1 rounded text-xs" style="background: var(--bg-tertiary);">Auto-scroll</button>
                            <button class="px-2 py-1 rounded text-xs" style="background: var(--bg-tertiary);">Clear</button>
                        </div>
                    </div>
                    <div class="h-64 overflow-y-auto space-y-2 font-mono text-sm" id="logsContainer">
                        <div class="log-entry log-info">[12:45:32] Step 1500/3000 | Loss: 0.234 | LR: 2e-5</div>
                        <div class="log-entry log-success">[12:45:00] ‚úÖ Checkpoint saved: step_1500</div>
                        <div class="log-entry log-info">[12:44:28] Step 1490/3000 | Loss: 0.238 | LR: 2e-5</div>
                        <div class="log-entry log-info">[12:43:56] Step 1480/3000 | Loss: 0.241 | LR: 2e-5</div>
                        <div class="log-entry log-warning">[12:43:00] ‚ö†Ô∏è GPU 2 temp: 75¬∞C (threshold: 80¬∞C)</div>
                        <div class="log-entry log-info">[12:42:24] Step 1470/3000 | Loss: 0.245 | LR: 2e-5</div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Notification Panel -->
        <aside class="w-80 p-4" style="background: var(--bg-secondary); border-left: 1px solid var(--border-color);">
            <h3 class="font-semibold mb-4">Notifications</h3>
            <div class="space-y-3">
                <div class="notification" style="background: rgba(63, 185, 80, 0.1); border-left: 3px solid var(--accent-green);">
                    <div class="font-medium text-green-400">Checkpoint Saved</div>
                    <div class="text-sm text-gray-400">Step 1500 saved successfully</div>
                    <div class="text-xs text-gray-500 mt-1">2 minutes ago</div>
                </div>
                <div class="notification" style="background: rgba(88, 166, 255, 0.1); border-left: 3px solid var(--accent-blue);">
                    <div class="font-medium text-blue-400">Training Update</div>
                    <div class="text-sm text-gray-400">Loss improved by 5%</div>
                    <div class="text-xs text-gray-500 mt-1">15 minutes ago</div>
                </div>
                <div class="notification" style="background: rgba(210, 153, 34, 0.1); border-left: 3px solid var(--accent-yellow);">
                    <div class="font-medium text-yellow-400">Budget Alert</div>
                    <div class="text-sm text-gray-400">70% of daily budget used</div>
                    <div class="text-xs text-gray-500 mt-1">1 hour ago</div>
                </div>
            </div>

            <h3 class="font-semibold mt-8 mb-4">Training Info</h3>
            <div class="space-y-3 text-sm">
                <div class="flex justify-between"><span class="text-gray-400">Model</span><span>LLaMA 3 8B</span></div>
                <div class="flex justify-between"><span class="text-gray-400">Dataset</span><span>alpaca-52k</span></div>
                <div class="flex justify-between"><span class="text-gray-400">Batch Size</span><span>4 √ó 4 = 16</span></div>
                <div class="flex justify-between"><span class="text-gray-400">Learning Rate</span><span>2e-5</span></div>
                <div class="flex justify-between"><span class="text-gray-400">Instance</span><span>4x B300 SPOT</span></div>
                <div class="flex justify-between"><span class="text-gray-400">Cost/Hour</span><span class="text-green-400">$4.96</span></div>
                <div class="flex justify-between"><span class="text-gray-400">Started</span><span>4h 32m ago</span></div>
            </div>
        </aside>
    </div>

    <script>
        // Initialize Charts
        const lossCtx = document.getElementById('lossChart').getContext('2d');
        const lossChart = new Chart(lossCtx, {
            type: 'line',
            data: {
                labels: Array.from({length: 20}, (_, i) => `${i * 5}m`),
                datasets: [{
                    label: 'Training Loss',
                    data: [0.8, 0.72, 0.65, 0.58, 0.52, 0.47, 0.43, 0.39, 0.36, 0.33, 0.31, 0.29, 0.27, 0.26, 0.25, 0.24, 0.235, 0.234, 0.234, 0.234],
                    borderColor: '#58a6ff',
                    backgroundColor: 'rgba(88, 166, 255, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: {
                    x: { grid: { color: '#30363d' }, ticks: { color: '#8b949e' } },
                    y: { grid: { color: '#30363d' }, ticks: { color: '#8b949e' } }
                }
            }
        });

        const memCtx = document.getElementById('memoryChart').getContext('2d');
        const memoryChart = new Chart(memCtx, {
            type: 'bar',
            data: {
                labels: ['GPU 0', 'GPU 1', 'GPU 2', 'GPU 3'],
                datasets: [{
                    label: 'Used',
                    data: [245, 241, 248, 243],
                    backgroundColor: '#58a6ff'
                }, {
                    label: 'Free',
                    data: [17, 21, 14, 19],
                    backgroundColor: '#30363d'
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'bottom' } },
                scales: {
                    x: { stacked: true, grid: { display: false }, ticks: { color: '#8b949e' } },
                    y: { stacked: true, grid: { color: '#30363d' }, ticks: { color: '#8b949e' } }
                }
            }
        });

        // Sparkline
        const sparkline = document.getElementById('gpuSparkline');
        for (let i = 0; i < 20; i++) {
            const bar = document.createElement('div');
            bar.className = 'sparkline-bar';
            bar.style.height = `${70 + Math.random() * 30}%`;
            sparkline.appendChild(bar);
        }

        // Functions
        function refreshData() {
            document.getElementById('gpuUtil').textContent = `${90 + Math.floor(Math.random() * 8)}%`;
            document.getElementById('loss').textContent = (0.23 + Math.random() * 0.01).toFixed(3);
        }

        function stopTraining() {
            if (confirm('Stop training? Current progress will be saved.')) {
                alert('Training stopped. Checkpoint saved.');
            }
        }

        function saveCheckpoint() {
            alert('Checkpoint saved: step_' + Math.floor(Math.random() * 1000 + 1500));
        }

        function downloadLogs() {
            alert('Downloading training logs...');
        }

        function showSection(section) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            event.target.closest('.nav-item').classList.add('active');
        }

        function toggleSettings() {
            alert('Settings panel - coming soon!');
        }

        // Auto-refresh every 5 seconds
        setInterval(refreshData, 5000);

        // Add log entry periodically
        setInterval(() => {
            const logs = document.getElementById('logsContainer');
            const step = 1500 + Math.floor(Math.random() * 10);
            const loss = (0.23 + Math.random() * 0.01).toFixed(3);
            const entry = document.createElement('div');
            entry.className = 'log-entry log-info';
            entry.textContent = `[${new Date().toLocaleTimeString()}] Step ${step}/3000 | Loss: ${loss} | LR: 2e-5`;
            logs.insertBefore(entry, logs.firstChild);
            if (logs.children.length > 50) logs.removeChild(logs.lastChild);
        }, 8000);
    </script>
</body>
</html>